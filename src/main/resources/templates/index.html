<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Reading Tips Archive</title>
    </head>

    <body>
        <h1>Reading Tips Archive</h1>

        <h2>Books</h2>

        <a href="/book_tip">add a book tip</a>
        <p>
        Sort:
            <button id="titleSort" onclick="sortByTitle()">By Title</button>
            <button id="authorSort" onclick="sortByAuthor()">By Author</button>
            <button id="idSort" onclick="sortByAdded()">By Added</button>
        </p>
        <ul id="book-tips"></ul>
        
        <script th:inline="javascript">
            var booktips=[
            /*[# th:each="book : ${books}"]*/
                {id:[[${book.id}]], title:[[${book.title}]], author:[[${book.author}]]},
            /*[/]*/
            ];
            
            displayTips();
            
            function sortByTitle() {
                booktips.sort(function(a, b){
                    var x = a.title.toLowerCase();
                    var y = b.title.toLowerCase();
                    if (x < y) {return -1;}
                    if (x > y) {return 1;}
                    return 0;
                });
                displayTips();
            }
            
            function sortByAuthor() {
                booktips.sort(function(a, b){
                    var x = a.author.toLowerCase();
                    var y = b.author.toLowerCase();
                    if (x < y) {return -1;}
                    if (x > y) {return 1;}
                    return 0;
                });
                displayTips();
            }
            
            function sortByAdded() {
                booktips.sort(function(a, b){
                    return a.id - b.id;
                });
                displayTips();
            }

            function displayTips() {
                var tipList = "";
                booktips.forEach(listTips);
                document.getElementById("book-tips").innerHTML = tipList;

                function listTips(tip) {
                    tipList = tipList + "<li><a id=" + tip.id + " href='/book_tip/" 
                            + tip.id + "'>" + tip.title + " by " + tip.author + "</a></li>"; 
                }
            }

        </script> 
               
    </body>
</html>
